--- 
layout: post
date: 2015-07-15  
title: 暴力破解密码
--- 

![image](http://7xk84a.com1.z0.glb.clouddn.com/baolipojie.jpg)

目标：老婆公司的OA系统  
动机：无。。。我跟老婆说她们OA不靠谱，别人想进去分分钟就可以进去，里面各种敏感信息全部都可以得到，她不信，非要我破给她看，于是就有了下面的尝试。最后的结果并没有拿到超级管理员的密码，原因是太费时间，放弃了。

### 初步试探

首先看登陆的url名称：xxx.php3，看来是php框架实现的，页面上有用户和密码两个输入框和登陆按钮。随意输入一个xxx和随意密码，发现提示用户名不存在，然后再次输入admin和随意密码，发现提示密码错误。。恩，蛮实诚的小伙。然后测试连续多次登陆错误，发现服务器没有任何保护措施——请随意登陆。那这还不简单嘛，直接暴力破解妥妥的。

### 使用的工具

刚开始试了几个，不知道是设置问题还是啥的，反正都不正常，最后整了个[这个](http://7xk84a.com1.z0.glb.clouddn.com/网站后台猜解.zip)，总算是可以正常工作了。光这个还不行，还得搞字典，百度随便一查，茫茫多的字典可以下载。

### 小试牛刀

用户名其实已经知道了，那就是admin，设置好字典就可以开始跑。但是这个软件做的着实不咋地，打开稍微大点的文件就会死掉。。只能用很小的字典来试，结果不是很理想，试了几个小字典都没有搞定，一开大字典就卡死，很烦人。好吧，后面就直接放弃了，我感觉整个稍微好点的tool(能够开N个线程一起跑的那种)，配合大一点的字典，应该是几小时内的事情。

后来又随意破解了几个其他用户名，比如名字的拼音缩写等，有几个非常快，秒出的密码：123...但是，已经没啥意思了。

### 安全的反思

不知道他们有没有it人员，也不知道他们的后台有没有log，如果有的话，看到今天茫茫多个login eror会不会有所觉察，这些不是我关心的，我在想是：如果自己来做这个login，可以采取哪些安全措施呢？

1. 首先可以想到的当然是限制同一ip的登录错误次数了，这个至少可以挡住大部分好事之徒，但是对于高手可以伪装ip的就束手无策了；
2. 添加登录验证码。大部分的网站好像都是1，2并用的，现在要想暴力，必须要识别验证码，难度提升了一个维度，当然只要想破，还是有方法，只是成本比较高；
3. 传说中的2步验证。这个就狠了，配合密码+短信验证码等的方式，直接无解。
4. 借助于第三方验证，使用OAuth，做成微信或者微博账号授权登录。这个也基本无解。

安全和方便可能是没法并得的，足够的安全往往意味这繁琐的步骤，比如验证码，2步验证或OAuth等，都需要比直接登录更多的操作，但是作为一个公司核心的OA而言，这绝对是必须的。