--- 
layout: post
date: 2013-04-11  
title: 添加小黄鸡功能和其他    
--- 


![](http://www.ashliu.com:8080/uploads/2153xiaohuangji.jpg)

我是邪恶的小黄鸡，我不怕禽流感。

人人网刚上线小黄鸡的时候去玩过，蛮有趣的。这两天研究了下，原来它并不是人人做的，只不过使用了别人的服务而已，这家提供服务的叫simsimi，棒子国的公司。

进一步查看，就发现了人人小黄鸡在github上的源码，python实现。参考了一下关于simsimi源码，发现简单修改就可以直接在ash说后台中，但上线测试发现经常发送失败，原因是微信服务器超时断开，于是序列化一个session，之后直接使用它，就可以免去get session过程，再次测试，就稳定了许多。可能仍然会你发送了消息，但是没有反应的情况，估计是ash说服务器在岛国，导致微信服务器发送的请求我接收不到所致。

顺带小黄鸡功能，把音乐，天气，糗百都加了进来。音乐是利用之前hack的豆瓣fm得到的，虽然不是高码率，但也将就了；天气和糗百都来至上面人人的这个github，里面糗百实现的不够理想，他是抓的一个feed页面，内容最大只有10多条，多以很容易重复，作为刷糗百一刷好几页的屌丝来说肯定是不够的，于是自己写了个直接抓糗百主页面的，但每次抓取都要好长时间，这如果放ash说后台肯定是超时，也就算了，以后有时间在改进。

于是，当前ash说有就如下功能了：

1. 查看历史记录。输入h或者是历史，会得到最新的5篇文章；
2. 听歌。输入m或者是音乐，会得到一首随即的80后好歌；
3. 天气查询。输入包含城市名和天气的消息，比如“武汉的天气”或者“北京天气”等，就会得到今天的天气情况；
4. 糗百。输入x或者是糗事，就会得到一条糗事消息。
5. 如果是随意的输入，那就是在调戏小黄鸡，它会怎么调戏你，我就不知道了。。

